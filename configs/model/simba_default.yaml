# Default SIMBA model architecture

# Transformer architecture
transformer:
  d_model: 256
  n_layers: 5
  n_heads: 8
  dropout: 0.1
  context_length: 100

# Backward compatibility - DO NOT REMOVE
# These fields are needed for loading old checkpoints
transformer_context: 100  # Alias for transformer.context_length
d_model: 256  # Alias for transformer.d_model
n_layers: 5  # Alias for transformer.n_layers
use_adduct: false  # Alias for features.use_adduct
edit_distance_use_gumbel: false  # Alias for tasks.edit_distance.use_gumbel
use_cosine_distance: true  # Alias for tasks.cosine_similarity.use_cosine_distance
categorical_adducts: false  # Alias for features.categorical_adducts
adduct_mass_map_csv: null  # For adduct configuration
use_ce: false  # Alias for features.use_ce
use_ion_activation: false  # Alias for features.use_ion_activation
use_ion_method: false  # Alias for features.use_ion_method

# Embeddings
embeddings:
  dim: 512

# Model features
features:
  use_adduct: false
  use_precursor_mz: true
  use_element_wise: true
  categorical_adducts: false
  use_only_protonized_adducts: false

  # Metadata features
  use_ce: false
  use_ion_activation: false
  use_ion_method: false

# Task configuration
tasks:
  # Edit Distance task
  edit_distance:
    enabled: true
    n_classes: 6
    use_gumbel: false
    use_regression: false
    max_value: 666

    # Gumbel softmax settings
    tau_gumbel_softmax: 10
    gumbel_reg_weight: 0.1

  # MCES (Maximum Common Edge Substructure) task
  mces:
    enabled: true
    use_log_loss: false
    threshold: 20
    max_value: 40

  # Cosine similarity task
  cosine_similarity:
    enabled: true
    use_cosine_distance: true

  # Tanimoto similarity
  tanimoto:
    enabled: false

  # Molecular fingerprints
  fingerprints:
    enabled: false
    use_fingerprint: false

# Multitasking
multitasking:
  enabled: true
  learnable: true
  use_loss_weights_second_similarity: false

# Data columns (for multitasking)
data_columns:
  edit_distance: 2
  mces20: 3

# Pretraining & Loading
pretrained:
  load_pretrained: false
  load_maldi_embedder: false
  maldi_embedder_path: null

# Classification threshold
threshold_class: 0.7
